<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>阿叩·杂记</title>
  
  <subtitle>学着写博客</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://aqlu.github.io/"/>
  <updated>2017-11-21T10:00:54.990Z</updated>
  <id>http://aqlu.github.io/</id>
  
  <author>
    <name>Angus_Lu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MacOS科学上网</title>
    <link href="http://aqlu.github.io/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%B7%A5%E5%85%B7%E7%B1%BB/MacOs-scientific-Surf-the-Internet.html"/>
    <id>http://aqlu.github.io/技术笔记/工具类/MacOs-scientific-Surf-the-Internet.html</id>
    <published>2017-11-21T07:07:27.000Z</published>
    <updated>2017-11-21T10:00:54.990Z</updated>
    
    <content type="html"><![CDATA[<p>本文将介绍如何在MacOS上采用<a href="https://www.v2ray.com/chapter_04/03_vmess.html" target="_blank" rel="noopener">VMess</a>协议与<code>墙外VPS</code>通信，其中主要用到了[v2ray]这款开源工具。</p><h2 id="服务端安装-Centos"><a href="#服务端安装-Centos" class="headerlink" title="服务端安装(Centos)"></a>服务端安装(Centos)</h2><p>因为我选择的VPS的Centos的操作系统，所以此章节主要基于Centos操作系统来描述。</p><ol><li>安装包下载：<code>wget https://github.com/v2ray/v2ray-core/releases/download/v2.40/v2ray-linux-64.zip</code></li><li>解压安装包到<code>/opt</code>目录：<code>unzip v2ray-linux-64.zip -d /opt</code></li><li><p>编写配置文件:</p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/v2ray-v2.40-linux-64</span><br><span class="line">vi config.json</span><br></pre></td></tr></table></figure><p> config.json内容：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"log"</span> : &#123; <span class="comment">// 日志输出配置</span></span><br><span class="line">        <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">        <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">        <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对外提供 vmess 协议</span></span><br><span class="line">    <span class="string">"inbound"</span>: &#123;</span><br><span class="line">        <span class="string">"port"</span>: <span class="number">28399</span>,  <span class="comment">// 监听端口</span></span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"clients"</span>: [&#123;</span><br><span class="line">                <span class="string">"id"</span>: <span class="string">"3b129ddd-72a3-4d28-aeee-028a0fe86e33"</span>, <span class="comment">// 可以随机生成一个，但必须保证服务端ID与客户端ID必须保持一致</span></span><br><span class="line">                <span class="string">"level"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">"alterId"</span>: <span class="number">64</span>,</span><br><span class="line">                <span class="string">"security"</span>: <span class="string">"aes-128-gcm"</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"outbound"</span>: &#123;</span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"routing"</span>: &#123;</span><br><span class="line">        <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"rules"</span>: [&#123;</span><br><span class="line">                <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">                <span class="string">"ip"</span>: [</span><br><span class="line">                    <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">                    <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">                    <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">                    <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">                    <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">                    <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">                    <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">                    <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">                    <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">                    <span class="string">"::1/128"</span>,</span><br><span class="line">                    <span class="string">"fc00::/7"</span>,</span><br><span class="line">                    <span class="string">"fe80::/10"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>启动<code>v2ray</code>服务：<code>/opt/v2ray-v2.40-linux-64/v2ray -config=/opt/v2ray-v2.40-linux-64/config.json &gt; v2ray.log &amp;</code></p></li></ol><h2 id="客户端安装-MacOs"><a href="#客户端安装-MacOs" class="headerlink" title="客户端安装(MacOs)"></a>客户端安装(MacOs)</h2><ol><li>安装包下载：<code>wget https://github.com/v2ray/v2ray-core/releases/download/v2.40/v2ray-macos.zip</code></li><li>解压安装包到<code>/usr/local/opt</code>目录：<code>unzip v2ray-linux-64.zip -d /usr/local/opt</code></li><li><p>编写配置文件:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/opt/v2ray-v2.40-linux-64</span><br><span class="line">vi config.json</span><br></pre></td></tr></table></figure><p> config.json内容：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"log"</span> : &#123;</span><br><span class="line">        <span class="string">"access"</span>: <span class="string">"/var/log/v2ray/access.log"</span>,</span><br><span class="line">        <span class="string">"error"</span>: <span class="string">"/var/log/v2ray/error.log"</span>,</span><br><span class="line">        <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对外提供 socks5 协议</span></span><br><span class="line">    <span class="string">"inbound"</span>: &#123;</span><br><span class="line">        <span class="string">"port"</span>: <span class="number">1080</span>, <span class="comment">// 监听端口</span></span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"socks"</span>, <span class="comment">// 入口协议为 SOCKS 5</span></span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"auth"</span>: <span class="string">"noauth"</span>  <span class="comment">//socks的认证设置，noauth 代表不认证，由于 socks 通常在客户端使用，所以这里不认证</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"outbound"</span>: &#123;</span><br><span class="line">        <span class="string">"protocol"</span>: <span class="string">"vmess"</span>, <span class="comment">// 出口协议，对应服务端的入口协议</span></span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"vnext"</span>: [&#123;</span><br><span class="line">                <span class="string">"address"</span>: <span class="string">"serveraddr.com"</span>, <span class="comment">// 服务器地址，请修改为你自己的服务器 ip 或域名</span></span><br><span class="line">                <span class="string">"port"</span>: <span class="number">28399</span>,  <span class="comment">// 服务器端口，对应服务器端入口的端口</span></span><br><span class="line">                <span class="string">"users"</span>: [&#123;</span><br><span class="line">                    <span class="string">"id"</span>: <span class="string">"3b129ddd-72a3-4d28-aeee-028a0fe86e33"</span>, <span class="comment">// 用户ID, 服务端ID与客户端ID必须保持一致</span></span><br><span class="line">                    <span class="string">"alterId"</span>: <span class="number">64</span> <span class="comment">// 此处的值也应当与服务器相同</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"routing"</span>: &#123;</span><br><span class="line">        <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">        <span class="string">"settings"</span>: &#123;</span><br><span class="line">            <span class="string">"rules"</span>: [&#123;</span><br><span class="line">                <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">                <span class="string">"ip"</span>: [</span><br><span class="line">                    <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">                    <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">                    <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">                    <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">                    <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">                    <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">                    <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">                    <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">                    <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">                    <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">                    <span class="string">"::1/128"</span>,</span><br><span class="line">                    <span class="string">"fc00::/7"</span>,</span><br><span class="line">                    <span class="string">"fe80::/10"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>启动<code>v2ray</code>服务：<code>/usr/local/opt/v2ray-v2.40-linux-64/v2ray -config=/usr/local/opt/v2ray-v2.40-linux-64/config.json &gt; v2ray.log &amp;</code></p></li></ol><h2 id="客户端安装的另一种方式（基于Docker安装）"><a href="#客户端安装的另一种方式（基于Docker安装）" class="headerlink" title="客户端安装的另一种方式（基于Docker安装）"></a>客户端安装的另一种方式（基于Docker安装）</h2><ol><li>下载镜像： <code>docker pull v2ray/official</code></li><li><p>编写配置文件：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/v2ray</span><br><span class="line"><span class="built_in">cd</span> ~/v2ray</span><br><span class="line">vi config.json <span class="comment"># 内容请参考客户端安装(MacOs)</span></span><br></pre></td></tr></table></figure></li><li><p>创建容器：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name v2ray -v ~/v2ray:/etc/v2ray -p 1080:1080 v2ray/official v2ray -config=/etc/v2ray/config.json</span><br></pre></td></tr></table></figure><blockquote><p><code>-p</code> 后面跟的端口为<code>config.json</code>中<code>inbound</code>配置的监听端口</p></blockquote></li><li>校验容器是否创建成功：<code>docker container ls</code></li><li>启动容器：<code>docker start</code></li><li>停止v2ray：<code>docker stop v2ray</code></li><li>重启v2ray：<code>docker restart v2ray</code></li><li>查看日志：<code>docker container log  v2ray</code></li></ol><h2 id="更多参考资料"><a href="#更多参考资料" class="headerlink" title="更多参考资料"></a>更多参考资料</h2><ul><li>项目：<a href="https://github.com/v2ray/v2ray-core" target="_blank" rel="noopener">https://github.com/v2ray/v2ray-core</a></li><li>用户手册：<a href="https://www.v2ray.com/" target="_blank" rel="noopener">https://www.v2ray.com/</a></li><li>其它文档：<a href="https://toutyrater.github.io/" target="_blank" rel="noopener">https://toutyrater.github.io/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文将介绍如何在MacOS上采用&lt;a href=&quot;https://www.v2ray.com/chapter_04/03_vmess.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;VMess&lt;/a&gt;协议与&lt;code&gt;墙外VPS&lt;/code&gt;通信，其中主要用到了[v2ray]这款开源工具。&lt;/p&gt;&lt;h2 id=&quot;服务端安装-Centos&quot;&gt;&lt;a href=&quot;#服务端安装-Centos&quot; class=&quot;headerlink&quot; title=&quot;服务端安装(Centos)&quot;&gt;&lt;/a&gt;服务端安装(Centos)&lt;/h2&gt;&lt;p&gt;因为我选择的VPS的Centos的操作系统，所以此章节主要基于Centos操作系统来描述。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;安装包下载：&lt;code&gt;wget https://github.com/v2ray/v2ray-core/releases/download/v2.40/v2ray-linux-64.zip&lt;/code&gt;&lt;/li&gt;&lt;li&gt;解压安装包到&lt;code&gt;/opt&lt;/code&gt;目录：&lt;code&gt;unzip v2ray-linux-64.zip -d /opt&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;编写配置文件:&lt;/p&gt;
    
    </summary>
    
      <category term="技术笔记" scheme="http://aqlu.github.io/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/"/>
    
      <category term="工具类" scheme="http://aqlu.github.io/categories/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
    
    
      <category term="vmess" scheme="http://aqlu.github.io/tags/vmess/"/>
    
      <category term="翻墙" scheme="http://aqlu.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>Hello World!</title>
    <link href="http://aqlu.github.io//hello-world.html"/>
    <id>http://aqlu.github.io//hello-world.html</id>
    <published>2017-11-21T04:35:00.000Z</published>
    <updated>2017-11-21T09:11:42.020Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h2><p>这是我的第一篇博客，感谢<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>提供了一个简单好用的博客框架，感谢<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexT</a>优雅的的主题。</p><p>此博客是<a href="./about/index.html">本人</a>的一个杂记。为什么叫杂记？其实就是一些乱七八糟的东西，可能是曾经的一些技术笔记，也可能是一些技术专题的连载，也可能是一些生活观点与琐事。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Hello-World&quot;&gt;&lt;a href=&quot;#Hello-World&quot; class=&quot;headerlink&quot; title=&quot;Hello World!&quot;&gt;&lt;/a&gt;Hello World!&lt;/h2&gt;&lt;p&gt;这是我的第一篇博客，感谢&lt;a href=&quot;https://hex
      
    
    </summary>
    
    
  </entry>
  
</feed>
