<!DOCTYPE HTML><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="keywords" content="Hystrix 配置属性参考, 阿叩·杂记"><meta name="description" content="介绍Hystrix使用Archaius作为配置属性的默认实现。下面的文档描述了默认使用的HystrixPropertiesStrategy实现，你也可以使用插件的方式来覆盖它。每个属性有四个优先级：代码的全局默认值如果没有设置以下3个，则这"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>Hystrix 配置属性参考 | 阿叩·杂记</title><link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><style type="text/css"></style><script src="/libs/jquery/jquery-2.2.0.min.js"></script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><span class="logo-span">阿叩·杂记</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a><ul class="right"><li class="hide-on-med-and-down"><a href="/" class="waves-effect waves-light"><i class="fa fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down"><a href="/tags" class="waves-effect waves-light"><i class="fa fa-tags"></i> <span>标签</span></a></li><li class="hide-on-med-and-down"><a href="/categories" class="waves-effect waves-light"><i class="fa fa-bookmark"></i> <span>分类</span></a></li><li class="hide-on-med-and-down"><a href="/archives" class="waves-effect waves-light"><i class="fa fa-archive"></i> <span>归档</span></a></li><li class="hide-on-med-and-down"><a href="/about" class="waves-effect waves-light"><i class="fa fa-user-circle-o"></i> <span>关于</span></a></li><li class="hide-on-med-and-down"><a href="/friends" class="waves-effect waves-light"><i class="fa fa-address-book"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fa fa-search" title="搜索"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><div class="logo-name">阿叩·杂记</div><div class="logo-desc">来自阿叩的工作、生活杂记</div></div><ul class="menu-list mobile-menu-list"><li><a href="/" class="waves-effect waves-light"><i class="fa fa-fw fa-home"></i> 首页</a></li><li><a href="/tags" class="waves-effect waves-light"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li><a href="/categories" class="waves-effect waves-light"><i class="fa fa-fw fa-bookmark"></i> 分类</a></li><li><a href="/archives" class="waves-effect waves-light"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li><a href="/about" class="waves-effect waves-light"><i class="fa fa-fw fa-user-circle-o"></i> 关于</a></li><li><a href="/friends" class="waves-effect waves-light"><i class="fa fa-fw fa-address-book"></i> 友情链接</a></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/4.jpg)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-title">Hystrix 配置属性参考</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}#floating-toc-btn{position:fixed;right:20px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/java/" target="_blank"><span class="chip bg-color">java</span> </a><a href="/tags/微服务/" target="_blank"><span class="chip bg-color">微服务</span> </a><a href="/tags/hystrix/" target="_blank"><span class="chip bg-color">hystrix</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/技术笔记/" class="post-category" target="_blank">技术笔记 </a><a href="/categories/技术笔记/Java/" class="post-category" target="_blank">Java</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp; 2018-01-04</div><div class="info-break-policy"><i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp; 4.9k</div><div class="info-break-policy"><i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp; 18 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Hystrix使用<a href="https://github.com/Netflix/archaius" target="_blank" rel="noopener">Archaius</a>作为配置属性的默认实现。</p><p>下面的文档描述了默认使用的<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/strategy/properties/HystrixPropertiesStrategy.html" target="_blank" rel="noopener">HystrixPropertiesStrategy</a>实现，你也可以使用<a href="https://github.com/Netflix/Hystrix/wiki/Plugins" target="_blank" rel="noopener">插件</a>的方式来覆盖它。</p><p>每个属性有四个优先级：</p><ol><li><p><strong>代码的全局默认值</strong></p><p>如果没有设置以下3个，则这是默认值。 全局默认值在下表中显示为 <strong>“默认值”</strong>。</p></li><li><p><strong>动态全局默认属性</strong></p><p>你可以使用属性更改全局默认值。 全局默认属性名称在下表中显示为 <strong>“默认属性”</strong>。</p><a id="more"></a></li><li><p><strong>用代码定义默认实例属性</strong></p><p>你可以定义特定于实例的默认值。例：</p><pre class="language-java"><code class="language-java"> HystrixCommandProperties<span class="token punctuation">.</span><span class="token function">Setter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withExecutionTimeoutInMilliseconds</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span>
</code></pre><p>你需要类似于以下的方式将这种命令插入到<code>HystrixCommand</code>构造函数中：</p><pre class="language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token function">HystrixCommandInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">super</span><span class="token punctuation">(</span>Setter<span class="token punctuation">.</span><span class="token function">withGroupKey</span><span class="token punctuation">(</span>HystrixCommandGroupKey<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">asKey</span><span class="token punctuation">(</span><span class="token string">"ExampleGroup"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                 <span class="token punctuation">.</span><span class="token function">andCommandPropertiesDefaults</span><span class="token punctuation">(</span>HystrixCommandProperties<span class="token punctuation">.</span><span class="token function">Setter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withExecutionTimeoutInMilliseconds</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><p>一般的设置初始值可以采用便利的构造函数方式。这是一个例子：</p><pre class="language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token function">HystrixCommandInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">super</span><span class="token punctuation">(</span>HystrixCommandGroupKey<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">asKey</span><span class="token punctuation">(</span><span class="token string">"ExampleGroup"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></li><li><p><strong>动态设置实例属性</strong></p><p>你可以动态设置实例特定的值，从而覆盖前面三个默认级别。</p><p>动态实例属性名称在下表中显示为 <strong>“实例属性”</strong>。</p><p>例：</p><table><thead><tr><th>实例属性</th><th><code>hystrix.command.HystrixCommandKey.execution.isolation.thread.timeoutInMilliseconds</code></th></tr></thead></table><p>将属性的<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/HystrixCommandKey.html" target="_blank" rel="noopener">HystrixCommandKey</a>部分替换为您所定位的<code>HystrixCommand</code>的<a href="http://netflix.github.io/Hystrix/javadoc/com/netflix/hystrix/HystrixCommandKey.html#name(" target="_blank" rel="noopener">HystrixCommandKey.name()</a>)值。</p><p>例如，如果被命名为“<code>SubscriberGetAccount</code>”，则属性名称将是：</p><blockquote><p><code>hystrix.command.SubscriberGetAccount.execution.isolation.thread.timeoutInMilliseconds</code></p></blockquote></li></ol><h2 id="命令属性（Command-Properties）"><a href="#命令属性（Command-Properties）" class="headerlink" title="命令属性（Command Properties）"></a>命令属性（Command Properties）</h2><p>以下<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/HystrixCommandProperties.html" target="_blank" rel="noopener">属性</a>将控制<code>HystrixCommand</code>的行为：</p><h3 id="执行（Execution）"><a href="#执行（Execution）" class="headerlink" title="执行（Execution）"></a>执行（Execution）</h3><p>以下属性控制<a href="http://netflix.github.io/Hystrix/javadoc/com/netflix/hystrix/HystrixCommand.html#run(" target="_blank" rel="noopener">HystrixCommand.run()</a>)执行。</p><h4 id="execution-isolation-strategy"><a href="#execution-isolation-strategy" class="headerlink" title="execution.isolation.strategy"></a>execution.isolation.strategy</h4><p>这个属性指示<code>HystrixCommand.run()</code>执行的隔离策略，有以下两种选择之一：</p><ul><li><code>THREAD</code> —— 它在单独的线程上执行，并发请求受线程池中线程数量的限制</li><li><code>SEMAPHORE</code> —— 它在调用线程上执行，并发请求受信号计数的限制</li></ul><p><strong>线程或信号量</strong></p><p>缺省值和建议的设置是运行<code>HystrixCommand</code>时使用线程隔离（<code>THREAD</code>），和运行<code>HystrixObservableCommand</code>时使用信号隔离（<code>SEMAPHORE</code>）。</p><p>在线程中执行命令能对网络超时提供另一层保护。</p><p>通常情况下，对于<code>HystrixCommand</code>来说，唯一使用信号量隔离的场景是，当调用量非常大（每秒数百次）时单独线程的开销太高；这通常只适用于非网络调用。</p><blockquote><p>Netflix的API在40+线程池中运行100+命令，并且只有少数命令不在线程中运行 —— 那些从内存中的缓存提取元数据或或是门面到线程隔离命令（更多信息请参见<a href="https://github.com/Netflix/Hystrix/wiki/How-To-Use#common-patterns" target="_blank" rel="noopener">Primary + Secondary with Fallback” pattern</a>）。</p></blockquote><p><img src="https://raw.githubusercontent.com/wiki/Netflix/Hystrix/images/isolation-options-1280.png" alt="isolation-options"></p><p>更多信息请参见<a href="https://github.com/Netflix/Hystrix/wiki/How-it-Works#isolation" target="_blank" rel="noopener">隔离是如何工作的</a>。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>THREAD</code>（参见：<code>ExecutionIsolationStrategy.THREAD</code>）</th></tr></thead><tbody><tr><td><strong>取值范围</strong></td><td style="text-align:left"><code>THREAD</code>, <code>SEMAPHORE</code></td></tr><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.isolation.strategy</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.isolation.strategy</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left">// to use thread isolation<br><code>HystrixCommandProperties.Setter().withExecutionIsolationStrategy(ExecutionIsolationStrategy.THREAD)</code><br>// to use semaphore isolation<br><code>HystrixCommandProperties.Setter().withExecutionIsolationStrategy(ExecutionIsolationStrategy.SEMAPHORE)</code></td></tr></tbody></table><h4 id="execution-isolation-thread-timeoutInMilliseconds"><a href="#execution-isolation-thread-timeoutInMilliseconds" class="headerlink" title="execution.isolation.thread.timeoutInMilliseconds"></a>execution.isolation.thread.timeoutInMilliseconds</h4><p>该属性设置以毫秒为单位，在该时间之后，调用者将观察到超时并离开命令执行。 Hystrix将<code>HystrixCommand</code>标记为<code>TIMEOUT</code>，并执行回退逻辑。请注意，如果需要可以为每个命令配置关闭超时的设置（请参阅<code>command.timeout.enabled</code>）。</p><p><strong>注意：</strong> 超时将在<code>HystrixCommand.queue()</code>上触发，即使调用者从未在生成的<code>Future</code>上调用<code>get()</code>。在Hystrix <code>1.4.0</code>之前，只有调用<code>get()</code>才能使超时机制在这种情况下生效。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>1000</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.isolation.thread.timeoutInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withExecutionTimeoutInMilliseconds(int value)</code></td></tr></tbody></table><h4 id="execution-timeout-enabled"><a href="#execution-timeout-enabled" class="headerlink" title="execution.timeout.enabled"></a>execution.timeout.enabled</h4><p>该属性指示<code>HystrixCommand.run()</code>执行是否应该有一个超时。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.timeout.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.timeout.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withExecutionTimeoutEnabled(boolean value)</code></td></tr></tbody></table><h4 id="execution-isolation-thread-interruptOnTimeout"><a href="#execution-isolation-thread-interruptOnTimeout" class="headerlink" title="execution.isolation.thread.interruptOnTimeout"></a>execution.isolation.thread.interruptOnTimeout</h4><p>这个属性指示<code>HystrixCommand.run()</code>执行是否应该在发生超时时被中断。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.isolation.thread.interruptOnTimeout</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.isolation.thread.interruptOnTimeout</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withExecutionIsolationThreadInterruptOnTimeout(boolean value)</code></td></tr></tbody></table><h4 id="execution-isolation-thread-interruptOnCancel"><a href="#execution-isolation-thread-interruptOnCancel" class="headerlink" title="execution.isolation.thread.interruptOnCancel"></a>execution.isolation.thread.interruptOnCancel</h4><p>这个属性指示<code>HystrixCommand.run()</code>执行是否应该在发生取消时被中断。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>false</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.isolation.thread.interruptOnCancel</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.isolation.thread.interruptOnCancel</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withExecutionIsolationThreadInterruptOnCancel(boolean value)</code></td></tr></tbody></table><h4 id="execution-isolation-semaphore-maxConcurrentRequests"><a href="#execution-isolation-semaphore-maxConcurrentRequests" class="headerlink" title="execution.isolation.semaphore.maxConcurrentRequests"></a>execution.isolation.semaphore.maxConcurrentRequests</h4><p>当您使用<code>ExecutionIsolationStrategy.SEMAPHORE</code>时，此属性设置允许<code>HystrixCommand.run()</code>方法的最大请求数。</p><p>如果达到这个最大并发限制，则后续请求将被拒绝。</p><p>当你选择一个信号量时，你使用的逻辑基本上和你选择线程池中添加多少个线程相同，但是信号量的开销要小得多，通常执行速度要快得多（亚毫秒） ，否则你会使用线程。</p><blockquote><p>例如，5000rps的单个实例在内存中查找指标聚集仅需要2个信号量就能工作。</p></blockquote><p>隔离原理仍然是相同的，所以信号量应该仍然是整个容器（如：Tomcat）线程池的一小部分，而不是全部或大部分，否则它不提供保护。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.execution.isolation.semaphore.maxConcurrentRequests</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.execution.isolation.semaphore.maxConcurrentRequests</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withExecutionIsolationSemaphoreMaxConcurrentRequests(int value)</code></td></tr></tbody></table><h3 id="回退（Fallback）"><a href="#回退（Fallback）" class="headerlink" title="回退（Fallback）"></a>回退（Fallback）</h3><p>以下属性控制<code>HystrixCommand.getFallback()</code>如何执行。这些属性适用于<code>ExecutionIsolationStrategy.THREAD</code>和<code>ExecutionIsolationStrategy.SEMAPHORE</code>。</p><h4 id="fallback-isolation-semaphore-maxConcurrentRequests"><a href="#fallback-isolation-semaphore-maxConcurrentRequests" class="headerlink" title="fallback.isolation.semaphore.maxConcurrentRequests"></a>fallback.isolation.semaphore.maxConcurrentRequests</h4><p>该属性设置<code>HystrixCommand.getFallback()</code>方法允许从调用线程中创建的最大请求数。</p><p>如果达到最大并发限制，则随后的请求将被拒绝并抛出异常，因为没有回退被提取到。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.fallback.isolation.semaphore.maxConcurrentRequests</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.fallback.isolation.semaphore.maxConcurrentRequests</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withFallbackIsolationSemaphoreMaxConcurrentRequests(int value)</code></td></tr></tbody></table><h4 id="fallback-enabled"><a href="#fallback-enabled" class="headerlink" title="fallback.enabled"></a>fallback.enabled</h4><p>Since: 1.2</p><p>该属性设置是否在发生故障或拒绝时尝试调用<code>HystrixCommand.getFallback()</code>。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.fallback.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.fallback.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withFallbackEnabled(boolean value)</code></td></tr></tbody></table><h3 id="断路器（Circuit-Breaker）"><a href="#断路器（Circuit-Breaker）" class="headerlink" title="断路器（Circuit Breaker）"></a>断路器（Circuit Breaker）</h3><p>断路器属性控制<code>HystrixCircuitBreaker</code>的行为。</p><h4 id="circuitBreaker-enabled"><a href="#circuitBreaker-enabled" class="headerlink" title="circuitBreaker.enabled"></a>circuitBreaker.enabled</h4><p>该属性设置是否将使用断路器来跟踪健康状况并且如果断路器跳闸则将其短路。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerEnabled(boolean value)</code></td></tr></tbody></table><h4 id="circuitBreaker-requestVolumeThreshold"><a href="#circuitBreaker-requestVolumeThreshold" class="headerlink" title="circuitBreaker.requestVolumeThreshold"></a>circuitBreaker.requestVolumeThreshold</h4><p>该属性设置滚动窗口中将使电路跳闸的最小请求数量。</p><p>例如，如果值是20，那么如果在滚动窗口中接收到19个请求（例如10秒的窗口），则即使所有19个请求都失败，电路也不会跳闸。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>20</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.requestVolumeThreshold</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.requestVolumeThreshold</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerRequestVolumeThreshold(int value)</code></td></tr></tbody></table><h4 id="circuitBreaker-sleepWindowInMilliseconds"><a href="#circuitBreaker-sleepWindowInMilliseconds" class="headerlink" title="circuitBreaker.sleepWindowInMilliseconds"></a>circuitBreaker.sleepWindowInMilliseconds</h4><p>该属性设置跳闸后的时间量，拒绝请求，然后再次尝试确定电路是否应再次闭合。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>5000</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.sleepWindowInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.sleepWindowInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerSleepWindowInMilliseconds(int value)</code></td></tr></tbody></table><h4 id="circuitBreaker-errorThresholdPercentage"><a href="#circuitBreaker-errorThresholdPercentage" class="headerlink" title="circuitBreaker.errorThresholdPercentage"></a>circuitBreaker.errorThresholdPercentage</h4><p>该属性设置错误百分比，在该值以上，电路应断开并开始将请求短路到回退逻辑。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>50</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.errorThresholdPercentage</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.errorThresholdPercentage</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerErrorThresholdPercentage(int value)</code></td></tr></tbody></table><h4 id="circuitBreaker-forceOpen"><a href="#circuitBreaker-forceOpen" class="headerlink" title="circuitBreaker.forceOpen"></a>circuitBreaker.forceOpen</h4><p>如果该属性为真，则强制断路器进入打开（跳闸）状态，将拒绝所有的请求。</p><p>此属性优先于<code>circuitBreaker.forceClosed</code>。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>false</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.forceOpen</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.forceOpen</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerForceOpen(boolean value)</code></td></tr></tbody></table><h4 id="circuitBreaker-forceClosed"><a href="#circuitBreaker-forceClosed" class="headerlink" title="circuitBreaker.forceClosed"></a>circuitBreaker.forceClosed</h4><p>如果该属性为真，则强制断路器进入关闭状态，在该状态下将允许请求，而不管错误百分比如何。</p><p><code>circuitBreaker.forceOpen</code>属性优先，所以如果它被设置为<code>true</code>，这个属性什么都不做。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>false</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.circuitBreaker.forceClosed</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.circuitBreaker.forceClosed</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withCircuitBreakerForceClosed(boolean value)</code></td></tr></tbody></table><h3 id="度量（Mitrics）"><a href="#度量（Mitrics）" class="headerlink" title="度量（Mitrics）"></a>度量（Mitrics）</h3><p>以下属性与从<code>HystrixCommand</code>和<code>HystrixObservableCommand</code>执行捕获指标有关。</p><h4 id="metrics-rollingStats-timeInMilliseconds"><a href="#metrics-rollingStats-timeInMilliseconds" class="headerlink" title="metrics.rollingStats.timeInMilliseconds"></a>metrics.rollingStats.timeInMilliseconds</h4><p>该属性设置统计滚动窗口的持续时间，以毫秒为单位。这是Hystrix保持断路器使用和发布指标的时间。</p><p>从1.4.12开始，此属性仅影响初始度量标准的创建，启动后对此属性所做的调整将不会生效。这样可以避免指标数据丢失，也可以优化指标收集。</p><p>窗口根据这些增量被分成桶和“卷”。</p><p>例如，如果将此属性设置为10秒（<code>10000</code>），具有十个1秒桶的，则下图显示了如何将新桶和旧桶关闭：</p><p><img src="https://github.com/Netflix/Hystrix/wiki/images/rolling-stats-640.png" alt="rolling-stats"></p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10000</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingStats.timeInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingStats.timeInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingStatisticalWindowInMilliseconds(int value)</code></td></tr></tbody></table><h4 id="metrics-rollingStats-numBuckets"><a href="#metrics-rollingStats-numBuckets" class="headerlink" title="metrics.rollingStats.numBuckets"></a>metrics.rollingStats.numBuckets</h4><p>该属性设置滚动统计窗口分成的桶的数量。</p><p><strong>注意：</strong> 必须要确保如下条件： “<code>metrics.rollingStats.timeInMilliseconds ％ metrics.rollingStats.numBuckets == 0</code>” ， 否则会引发异常。</p><p>换句话说，10000/10是可以的，10000/20也行，但是10000/7不行。</p><p>从1.4.12开始，此属性仅影响初始度量标准的创建，启动后对此属性所做的调整将不会生效。这样可以避免指标数据丢失，也可以优化指标收集。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>取值范围</strong></td><td style="text-align:left">可以被<code>metric.rollingStats.timeInMilliseconds</code>整除的任何值。结果应该是数百或数千毫秒的桶。大容量的性能还没有测试过小于100ms的桶。</td></tr><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingStats.numBuckets</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingStats.numBuckets</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingStatisticalWindowBuckets(int value)</code></td></tr></tbody></table><h4 id="metrics-rollingPercentile-enabled"><a href="#metrics-rollingPercentile-enabled" class="headerlink" title="metrics.rollingPercentile.enabled"></a>metrics.rollingPercentile.enabled</h4><p>这个属性表示执行延迟是否应该跟踪和计算为百分比。如果他们被禁用，则所有汇总统计（平均值，百分位数）返回为-1。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingPercentile.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingPercentile.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingPercentileEnabled(boolean value)</code></td></tr></tbody></table><h4 id="metrics-rollingPercentile-timeInMilliseconds"><a href="#metrics-rollingPercentile-timeInMilliseconds" class="headerlink" title="metrics.rollingPercentile.timeInMilliseconds"></a>metrics.rollingPercentile.timeInMilliseconds</h4><p>此属性设置滚动窗口的持续时间，在该窗口中保留执行时间以允许百分数计算（以毫秒为单位）。</p><p>窗口根据这些增量被分成桶和“卷”。</p><p>从1.4.12开始，此属性仅影响初始度量标准的创建，启动后对此属性所做的调整将不会生效。这样可以避免指标数据丢失，也可以优化指标收集。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>6000</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingPercentile.timeInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingPercentile.timeInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingPercentileWindowInMilliseconds(int value)</code></td></tr></tbody></table><h4 id="metrics-rollingPercentile-numBuckets"><a href="#metrics-rollingPercentile-numBuckets" class="headerlink" title="metrics.rollingPercentile.numBuckets"></a>metrics.rollingPercentile.numBuckets</h4><p>这个属性设置了<code>rollingPercentile</code>窗口将被分成的桶的数量。</p><p><strong>注意：</strong> 必须要确保如下条件：“<code>metrics.rollingPercentile.timeInMilliseconds ％ metrics.rollingPercentile.numBuckets == 0</code>” ，否则会引发异常。</p><p>换句话说，60000/6是可以的，60000/60也是可以的，但10000/7不行。</p><p>从1.4.12开始，此属性仅影响初始度量标准的创建，启动后对此属性所做的调整将不会生效。这样可以避免指标数据丢失，也可以优化指标收集。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>6</code></th></tr></thead><tbody><tr><td><strong>取值范围</strong></td><td style="text-align:left">可以被<code>metric.rollingPercentile.timeInMilliseconds</code>整除的任何值。结果应该是数千毫秒的桶。大容量的性能还没有测试过小于1000ms的桶。</td></tr><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingPercentile.numBuckets</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingPercentile.numBuckets</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingPercentileWindowBuckets(int value)</code></td></tr></tbody></table><h4 id="metrics-rollingPercentile-bucketSize"><a href="#metrics-rollingPercentile-bucketSize" class="headerlink" title="metrics.rollingPercentile.bucketSize"></a>metrics.rollingPercentile.bucketSize</h4><p>该属性设置每个桶的最大执行次数。如果更多的执行在此期间发生，他们将环绕并开始在桶的开头重写。</p><p>例如，如果桶大小设置为100，并桶的窗口为10秒，但是在此期间发生500次执行，则只有最后100次执行将保留在该10秒的桶中。</p><p>如果增加这个大小，这也增加了存储值所需的内存量，并增加了对列表进行排序以进行百分比计算所需的时间。</p><p>从1.4.12开始，此属性仅影响初始度量标准的创建，启动后对此属性所做的调整将不会生效。这样可以避免指标数据丢失，也可以优化指标收集。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>100</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.rollingPercentile.bucketSize</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.rollingPercentile.bucketSize</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsRollingPercentileBucketSize(int value)</code></td></tr></tbody></table><h4 id="metrics-healthSnapshot-intervalInMilliseconds"><a href="#metrics-healthSnapshot-intervalInMilliseconds" class="headerlink" title="metrics.healthSnapshot.intervalInMilliseconds"></a>metrics.healthSnapshot.intervalInMilliseconds</h4><p>此属性设置允许执行运行成功和错误百分比并影响断路器状态的健康快照之间等待的时间（以毫秒为单位）。</p><p>在大容量的电路上，连续计算误差百分比可能会成为CPU密集型的，因此这个属性允许你控制计算的频率。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>500</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.metrics.healthSnapshot.intervalInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.metrics.healthSnapshot.intervalInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withMetricsHealthSnapshotIntervalInMilliseconds(int value)</code></td></tr></tbody></table><h3 id="请求上下文（Request-Context）"><a href="#请求上下文（Request-Context）" class="headerlink" title="请求上下文（Request Context）"></a>请求上下文（Request Context）</h3><p>这些属性涉及<code>HystrixCommand</code>使用<a href="http://netflix.github.com/Hystrix/javadoc/index.html?com/netflix/hystrix/strategy/concurrency/HystrixRequestContext.html" target="_blank" rel="noopener">HystrixRequestContext</a>功能。</p><h4 id="requestCache-enabled"><a href="#requestCache-enabled" class="headerlink" title="requestCache.enabled"></a>requestCache.enabled</h4><p>此属性指示<a href="http://netflix.github.io/Hystrix/javadoc/com/netflix/hystrix/HystrixCommand.html#getCacheKey(" target="_blank" rel="noopener">HystrixCommand.getCacheKey()</a>)是否应与<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/HystrixRequestCache.html" target="_blank" rel="noopener">HystrixRequestCache</a>一起使用，以通过请求范围缓存提供重复数据删除功能。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.requestCache.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.requestCache.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withRequestCacheEnabled(boolean value)</code></td></tr></tbody></table><h4 id="requestLog-enabled"><a href="#requestLog-enabled" class="headerlink" title="requestLog.enabled"></a>requestLog.enabled</h4><p>此属性指示是否应将<code>HystrixCommand</code>执行和事件记录到<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/HystrixRequestLog.html" target="_blank" rel="noopener">HystrixRequestLog</a></p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.command.default.requestLog.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.command.HystrixCommandKey.requestLog.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCommandProperties.Setter().withRequestLogEnabled(boolean value)</code></td></tr></tbody></table><h2 id="破裂器属性（Collapser-Properties）"><a href="#破裂器属性（Collapser-Properties）" class="headerlink" title="破裂器属性（Collapser Properties）"></a>破裂器属性（Collapser Properties）</h2><p>以下属性控制<a href="http://netflix.github.io/Hystrix/javadoc/index.html?com/netflix/hystrix/HystrixCollapser.html" target="_blank" rel="noopener">HystrixCollapser</a>行为。</p><h3 id="maxRequestsInBatch"><a href="#maxRequestsInBatch" class="headerlink" title="maxRequestsInBatch"></a>maxRequestsInBatch</h3><p>此属性设置批处理允许的最大请求数量，然后触发批处理执行。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>Integer.MAX_VALUE</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.collapser.default.maxRequestsInBatch</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.collapser.HystrixCollapserKey.maxRequestsInBatch</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCollapserProperties.Setter().withMaxRequestsInBatch(int value)</code></td></tr></tbody></table><h3 id="timerDelayInMilliseconds"><a href="#timerDelayInMilliseconds" class="headerlink" title="timerDelayInMilliseconds"></a>timerDelayInMilliseconds</h3><p>此属性设置触发执行之后创建批处理的毫秒数。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.collapser.default.timerDelayInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.collapser.HystrixCollapserKey.timerDelayInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCollapserProperties.Setter().withTimerDelayInMilliseconds(int value)</code></td></tr></tbody></table><h3 id="requestCache-enabled-1"><a href="#requestCache-enabled-1" class="headerlink" title="requestCache.enabled"></a>requestCache.enabled</h3><p>此属性指示是否为<a href="http://netflix.github.io/Hystrix/javadoc/com/netflix/hystrix/HystrixCollapser.html#execute--" target="_blank" rel="noopener">HystrixCollapser.execute()</a>和<a href="http://netflix.github.io/Hystrix/javadoc/com/netflix/hystrix/HystrixCollapser.html#queue--" target="_blank" rel="noopener">HystrixCollapser.queue()</a>调用启用了请求缓存。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>true</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.collapser.default.requestCache.enabled</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.collapser.HystrixCommandKey.requestCache.enabled</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixCollapserProperties.Setter().withRequestCacheEnabled(boolean value)</code></td></tr></tbody></table><h2 id="线程池属性（Thread-Pool-Properties）"><a href="#线程池属性（Thread-Pool-Properties）" class="headerlink" title="线程池属性（Thread Pool Properties）"></a>线程池属性（Thread Pool Properties）</h2><p>以下属性控制Hystrix命令执行的线程池的行为。请注意，这些名称与<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html" target="_blank" rel="noopener">ThreadPoolExecutor Javadoc</a>中的名称相匹配</p><p>大多数情况下，10个线程的默认值都可以（通常可以做得更小）。</p><p>要确定是否需要更大，计算大小的基本公式是：</p><p><em>在健康时每秒的请求高峰数 × 99%的延迟秒数+一些喘息的空间时。</em></p><p>看下面的例子，看看这个公式是如何实施的。 总体原则是尽可能保持池的小，因为它是减轻负载并防止资源在延迟发生时被阻塞的主要工具。</p><blockquote><p>Netflix API有30+的线程池被设置为10，两个在20，一个在25。</p></blockquote><p><img src="https://github.com/Netflix/Hystrix/wiki/images/thread-configuration-1280.png" alt="thread-configuration"></p><p>上图显示了一个配置示例，其中依赖关系没有理由达到第99.5百分位，因此它在网络超时层将其缩短，并立即重试，并期望大部分时间会得到中位延迟能够在300ms线程超时内完成这一切。</p><p>如果依赖有合法的理由有时达到99.5％（比如缓存未命中），那么网络超时将被设置得比它高，比如325ms，重试0或1次，线程超时设置更高（350ms + ）。</p><p>线程池的大小为10，以处理第99个百分点请求的突发，但是当一切正常时，此线程池通常在任何给定时间通常只有1或2个线程处于活动状态，以服务大多数40ms的中间调用。</p><p>当你正确地配置它时，<code>HystrixCommand</code>层的超时应该是很少的，但是如果网络等待时间以外的事情影响了时间，或者在最坏的情况下连接+读+重试+连接+读超过配置的整体超时。</p><p>每个方向的配置和折衷的攻击性对于每个依赖性是不同的。</p><p>当性能特征发生变化或发现问题时，您可以根据需要实时更改配置，而且如果出现问题或配置错误，则无需关闭整个应用程序。</p><h3 id="coreSize"><a href="#coreSize" class="headerlink" title="coreSize"></a>coreSize</h3><p>此属性设置核心线程数。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.coreSize</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.coreSize</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withCoreSize(int value)</code></td></tr></tbody></table><h3 id="maximumSize"><a href="#maximumSize" class="headerlink" title="maximumSize"></a>maximumSize</h3><p>在<code>1.5.9</code>中添加。该属性设置最大的线程池大小。这是开始无需拒绝<code>HystrixCommand</code>即可支持的最大并发数量。请注意，如果您还设置了<code>allowMaximumSizeToDivergeFromCoreSize</code>，则此设置才会生效。在<code>1.5.9</code>之前，核心和最大大小总是相等的。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.maximumSize</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.maximumSize</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withMaximumSize(int value)</code></td></tr></tbody></table><h3 id="maxQueueSize"><a href="#maxQueueSize" class="headerlink" title="maxQueueSize"></a>maxQueueSize</h3><p>该属性设置<code>BlockingQueue</code>实现的最大队列大小。</p><p>如果将其设置为<code>-1</code>，则将使用<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html" target="_blank" rel="noopener">SynchronousQueue</a>，其它正值将使用<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html" target="_blank" rel="noopener">LinkedBlockingQueue</a>。</p><p><strong>注意：</strong> 这个属性只适用于初始化时间，因为如果不重新初始化线程执行器，不支持的队列被调整或改变。</p><p>如果您需要越过此限制并允许在队列中进行动态更改，请参阅<code>queueSizeRejectionThreshold</code>属性。</p><p>要在<code>SynchronousQueue</code>和<code>LinkedBlockingQueue</code>之间切换，需要重新启动。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>-1</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.maxQueueSize</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.maxQueueSize</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withMaxQueueSize(int value)</code></td></tr></tbody></table><h3 id="queueSizeRejectionThreshold"><a href="#queueSizeRejectionThreshold" class="headerlink" title="queueSizeRejectionThreshold"></a>queueSizeRejectionThreshold</h3><p>此属性设置队列大小拒绝阈值 —— 即使<code>maxQueueSize</code>尚未达到，拒绝将发生的人为最大队列大小。此属性的存在是因为<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html" target="_blank" rel="noopener">BlockingQueue</a>的<code>maxQueueSize</code>不能动态更改，我们希望允许您动态更改影响拒绝的队列大小。</p><p>当排队一个线程执行时，<code>HystrixCommand</code>使用它。</p><p><strong>注意：</strong> 如果<code>maxQueueSize == -1</code>，则此属性不适用。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>5</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.queueSizeRejectionThreshold</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.queueSizeRejectionThreshold</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withQueueSizeRejectionThreshold(int value)</code></td></tr></tbody></table><h3 id="keepAliveTimeMinutes"><a href="#keepAliveTimeMinutes" class="headerlink" title="keepAliveTimeMinutes"></a>keepAliveTimeMinutes</h3><p>该属性设置保持活动时间，以分钟为单位。 在<code>1.5.9</code>之前，所有线程池都是固定大小的，如<code>coreSize == maximumSize</code>。在<code>1.5.9</code>之后，将<code>allowMaximumSizeToDivergeFromCoreSize</code>设置为<code>true</code>允许这两个值发散，以便线程池可以获取/释放线程。如果<code>coreSize &lt;maximumSize</code>，那么这个属性控制一个线程在被释放之前将不被使用的时间。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>1</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.keepAliveTimeMinutes</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.keepAliveTimeMinutes</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withKeepAliveTimeMinutes(int value)</code></td></tr></tbody></table><h3 id="allowMaximumSizeToDivergeFromCoreSize"><a href="#allowMaximumSizeToDivergeFromCoreSize" class="headerlink" title="allowMaximumSizeToDivergeFromCoreSize"></a>allowMaximumSizeToDivergeFromCoreSize</h3><p>在<code>1.5.9</code>中添加。此属性允许<code>maximumSize</code>的配置生效。该值可以等于或高于<code>coreSize</code>。设置<code>coreSize &lt;maximumSize</code>会创建一个线程池，它可以支持<code>maximumSize</code>并发性，但是会在相对不活动的时间内将线程返回给系统。 （以<code>keepAliveTimeInMinutes</code>为准）</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>false</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.allowMaximumSizeToDivergeFromCoreSize</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.allowMaximumSizeToDivergeFromCoreSize</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withAllowMaximumSizeToDivergeFromCoreSize(boolean value)</code></td></tr></tbody></table><h3 id="metrics-rollingStats-timeInMilliseconds-1"><a href="#metrics-rollingStats-timeInMilliseconds-1" class="headerlink" title="metrics.rollingStats.timeInMilliseconds"></a>metrics.rollingStats.timeInMilliseconds</h3><p>该属性设置统计滚动窗口的持续时间，以毫秒为单位。这是为线程池保留多长时间的指标。</p><p>窗口根据这些增量被分成桶和“卷”。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10000</code></th></tr></thead><tbody><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default..metrics.rollingStats.timeInMilliseconds</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.metrics.rollingStats.timeInMilliseconds</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withMetricsRollingStatisticalWindowInMilliseconds(int value)</code></td></tr></tbody></table><h3 id="metrics-rollingStats-numBuckets-1"><a href="#metrics-rollingStats-numBuckets-1" class="headerlink" title="metrics.rollingStats.numBuckets"></a>metrics.rollingStats.numBuckets</h3><p>该属性设置滚动统计窗口分成的桶的数量。</p><p><strong>注意：</strong> 必须要确保如下条件：“<code>metrics.rollingStats.timeInMilliseconds ％ metrics.rollingStats.numBuckets == 0</code>” ，否则会引发异常。</p><p>换句话说，10000/10是可以的，10000/20也可以，但是10000/7不行。</p><table><thead><tr><th>默认值</th><th style="text-align:left"><code>10</code></th></tr></thead><tbody><tr><td><strong>取值范围</strong></td><td style="text-align:left">能被<code>metrics.rollingStats.timeInMilliseconds</code>整除的任何值，结果应该是数百或数千毫秒的桶。大容量的性能还没有测试过小于100ms的桶。</td></tr><tr><td><strong>默认属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.default.metrics.rollingStats.numBuckets</code></td></tr><tr><td><strong>实例属性</strong></td><td style="text-align:left"><code>hystrix.threadpool.HystrixThreadPoolKey.metrics.rollingStats.numBuckets</code></td></tr><tr><td><strong>如何设置<br>默认实例</strong></td><td style="text-align:left"><code>HystrixThreadPoolProperties.Setter().withMetricsRollingStatisticalWindowBuckets(int value)</code></td></tr></tbody></table><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://github.com/Netflix/Hystrix/wiki/Configuration" target="_blank" rel="noopener">https://github.com/Netflix/Hystrix/wiki/Configuration</a></p><style>table th:first-of-type{width:80px}</style></div><hr><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.88rem}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fa fa-close"></i></a><h4 class="reward-title">坚持原创分享，您的支持将鼓励我继续创作！</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/images/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/images/wechatpay.jpg" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div></div><script src="/libs/share/js/social-share.min.js"></script><div class="reprint" id="reprint-statement"><p class="reprint-tip"><i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp; <span>转载规则</span></p><div class="center-align"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><img alt="" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a></div><br><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">《Hystrix 配置属性参考》 </span>由 <a xmlns:cc="http://creativecommons.org/ns#" href="/技术笔记/Java/Hystrix-configuration.html" property="cc:attributionName" rel="cc:attributionURL">Angus_Lu </a>采用 <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">知识共享署名 4.0 国际许可协议 </a>进行许可。</div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script></div></div><link rel="stylesheet" href="/libs/gitalk/gitalk.css"><link rel="stylesheet" href="/css/my-gitalk.css"><div class="card gitalk-card" data-aos="fade-up"><div id="gitalk-container" class="card-content"></div></div><script src="/libs/gitalk/gitalk.min.js"></script><script>let gitalk = new Gitalk({
        clientID: 'e19ae7aa39993c33ca79',
        clientSecret: '3c545d407de72582ec0cfa83daa07b18df14ab37',
        repo: 'blog-comment',
        owner: 'aqlu',
        admin: "aqlu",
        id: '2018-01-04T10-39-38',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6 overflow-policy" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fa fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/技术笔记/Java/Java-Memory-Model.html"><div class="card-image"><img src="/medias/featureimages/8.jpg" class="responsive-img" alt="JVM内存结构简介"> <span class="card-title">JVM内存结构简介</span></div></a><div class="card-content article-content"><div class="summary block-with-text">Java运行时内存结构+-------------------------------------------------+ | Runtime Memory Structure Chart | | +-</div><div class="publish-info"><span class="publish-date"><i class="fa fa-clock-o fa-fw icon-date"></i>2018-01-10 11:34:55 </span><span class="publish-author"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/技术笔记/" class="post-category" target="_blank">技术笔记 </a><a href="/categories/技术笔记/Java/" class="post-category" target="_blank">Java</a></span></div></div><div class="card-action article-tags"><a href="/tags/java/" target="_blank"><span class="chip bg-color">java</span> </a><a href="/tags/jvm/" target="_blank"><span class="chip bg-color">jvm</span></a></div></div></div><div class="article col s12 m6 overflow-policy" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fa fa-chevron-right"></i></div><div class="card"><a href="/技术笔记/工具类/MacOs-install-opencv.html"><div class="card-image"><img src="/medias/featureimages/1.jpg" class="responsive-img" alt="MacOS下基于Python2.7安装OpenCV3"> <span class="card-title">MacOS下基于Python2.7安装OpenCV3</span></div></a><div class="card-content article-content"><div class="summary block-with-text">步骤概览安装Xcode以及Apple Command Line Tools安装Homebrew创建Python虚拟环境安装NumPy安装OpenCV安装Xcode以及Apple Command Line Tools从App Store下载并</div><div class="publish-info"><span class="publish-date"><i class="fa fa-clock-o fa-fw icon-date"></i>2017-12-13 09:28:37 </span><span class="publish-author"><i class="fa fa-bookmark fa-fw icon-category"></i> <a href="/categories/技术笔记/" class="post-category" target="_blank">技术笔记 </a><a href="/categories/技术笔记/工具类/" class="post-category" target="_blank">工具类</a></span></div></div><div class="card-action article-tags"><a href="/tags/python/" target="_blank"><span class="chip bg-color">python</span> </a><a href="/tags/opencv/" target="_blank"><span class="chip bg-color">opencv</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: 阿叩·杂记<br />作者: Angus_Lu<br />链接: <a href="'+i+'">'+i+'</a><br />本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！。',n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fa fa-list"></i></a></div><script src="/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right">本站由&copy;<a href="https://github.com/aqlu" target="_blank">Angus.AQLU</a>基于 <a href="https://hexo.io/" target="_blank">Hexo</a> 的 <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建. &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp; <span class="white-color">34.5k</span><br><span id="busuanzi_container_site_pv"><i class="fa fa-heart-o"></i> 本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span> </span><span id="busuanzi_container_site_uv"><i class="fa fa-users"></i> 次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.</span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/aqlu" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i> </a><a href="mailto:angus.aqlu@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i> </a><a href="/images/wechat-myself.jpg" class="tooltipped" data-tooltip="微信联系我" data-position="top" data-delay="50"><i class="fa fa-weixin"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2064202" class="tooltipped" data-tooltip="QQ联系我: 2064202" data-position="top" data-delay="50"><i class="fa fa-qq"></i> </a><a href="https://www.weibo.com/u/2139905947" class="tooltipped" target="_blank" data-tooltip="访问我的微博" data-position="top" data-delay="50"><i class="fa fa-weibo"></i> </a><a href="https://www.zhihu.com/people/angus-lu" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50"><i class="fa fa-anchor"></i> </a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fa fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script type="text/javascript">$(function(){searchFunc("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fa fa-angle-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-61930663-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-61930663-2")</script><script async src="/libs/others/busuanzi.pure.mini.js"></script></body></html>